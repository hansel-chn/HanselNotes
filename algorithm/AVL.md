# AVL(平衡二叉树)

## 平衡二叉树插入操作

首先找到新插入节点的位置n（为叶子节点），向上寻找第一个不平衡的节点z，并且获取到在n到z路径上节点z的孩子节点和孙子节点y。判断节点x和y的位置关系`LL,LR,RL,RR`,进行左旋右旋生成平衡二叉树

## 平衡二叉树删除操作

找到待删除的节点，向上遍历第一个不平衡的节点z，寻找节点z中高度最高的的孩子节点x和孙子节点y（y其实也是x孩子节点中最高的），判断节点x和y的位置关系`LL,LR,RL,RR`,进行左旋右旋，以z为根的子树构建平衡二叉树；然后继续向上对不平衡的祖先节点进行平衡操作，直至根节点。

删除的节点非子节点的情况：
* 只有左子树或者右子树：孩子节点替代
* 有左子树和右子树：前驱或者后继节点替换删除节点，依次向上对不平衡节点做平衡操作

## 性能
* 这里的四种情况与插入操作一样，但需要注意的是，插入操作仅需要对以 z 为根的子树进行平衡操作；而平衡二叉树的删除操作就不一样，先对以 z 为根的子树进行平衡操作，之后可能需要对 z 的祖先结点进行平衡操作，向上回溯直到根结点。
* 删除操作的平衡次数可能需要多次，插入操作的平衡二叉树仅需一次（LR，RL算一次的话）。